<mat-accordion class="example-headers-align" multi>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{listName}} ({{tasks.length}})
      </mat-panel-title>
      <mat-panel-description>
        <span></span>
        <mat-icon>task</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div class="container">
      <div>
        <br>
        <div class="main-table-container mat-elevation-z4">
          <div class="table-container">

            <table [dataSource]="children" class="http-table" mat-table>

              <ng-container matColumnDef="number">
                <th *matHeaderCellDef mat-header-cell>#</th>
                <td *matCellDef="let row" mat-cell>
                  <a [style.color]="getTextColorStyle(row.child.type)"
                     routerLink='/tasks/{{row.child.id}}/details'>{{row.child.number}}</a>
                </td>
                <td *matFooterCellDef mat-footer-cell><strong> <a
                  [style.color]="getTextColorStyle(parent?.parent?.type)"
                  routerLink='/tasks/{{parent?.parent?.id}}/details'>{{parent?.parent?.number}}</a></strong></td>
              </ng-container>

              <ng-container matColumnDef="summary">
                <th *matHeaderCellDef mat-header-cell>Summary</th>
                <td *matCellDef="let row" mat-cell>
                  <span
                    *ngIf="row.child.summary.length > MAX_SUMMARY_LENGTH; then substrSummary else origSummary"></span>
                  <ng-template #origSummary>{{row.child.summary}}</ng-template>
                  <ng-template
                    #substrSummary>{{row.child.summary.substring(0, MAX_SUMMARY_LENGTH) + '...'}}</ng-template>
                </td>
                <td *matFooterCellDef mat-footer-cell><strong>{{parent?.parent?.summary}} </strong></td>
              </ng-container>

              <ng-container matColumnDef="relation">
                <th *matHeaderCellDef mat-header-cell>Relation</th>
                <td *matCellDef="let row" mat-cell>{{row.type == 'CHILD_IS_PART_OF' ? "Subtask" : ""}}</td>
                <td *matFooterCellDef mat-footer-cell><strong>{{parent ? 'Parent' : ''}}</strong></td>
              </ng-container>

              <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
              <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
              <tr *matFooterRowDef="displayedColumns" [hidden]="parent==undefined" class="border-top"
                  mat-footer-row
                  style="background-color: #f1f1f1"></tr>
            </table>
          </div>

          <!--          <mat-paginator [length]="tasks.length" [pageSize]="tasks.length"-->
          <!--                         aria-label="Select page of results"></mat-paginator>-->
        </div>
      </div>
    </div>
    <br>
  </mat-expansion-panel>
</mat-accordion>
